# NoSQL개요

---

## NoSQL Database

NoSQL은 매우 넓은 범위에서 사용하는 용어로, 관계형 테이블의 레거시한 방법을 사용하지 않은 데이터 저장소를 말합니다. 또 한 데이터를 도큐먼트의 형태로 저장하며 NoSQL의 대표적인 도큐먼트 데이터베이스인 MongoDB가 있습니다. 즉 MongoDB 데이터베이스는 NoSQL기반 도큐먼트 데이터 베이스 입니다.

<br />

## NoSQL를 사용하는 경우

1. 비구조적인 대용량의 데이터를 저장하는 경우
- 관계중점이 아닌 자유로운 형태로 데이터를 저장할수 있습니다. 즉 정형화되지 않은 많은 양의 데이터가 필요한 경우 NoSQL을 사용합니다.  

2. 클라우드 컴퓨팅 및 저장공간을 최대한 활용하는 경우
- NoSQL 데이터베이스는 데이터베이스를 클라우드 기반으로 쉽게 분리 할 수 있도록 지원하여, 저장 공간을 효율적으로 사용합니다. 즉 수평적 확장의 형태로 증설하므로, 서버를 계속 분산시켜 DB를 증설할 수 있습니다.

3. 빠르게 서비스를 구축하고 데이터 구조를 자주 업데이트 하는 경우
- NoSQL데이터베이스의 경우 스키마를 미리 준비할 필요가 없어서 개발을 빠르게 할때 매우 적합합니다.

<br />

## Atlas Cloud

MongoDB에서는 아틀라스로 클라우드에 데이터베이스를 설정합니다. 아틀라스는 GUI와 CLI로 데이터를 시각화, 분석, 내보내기, 그리고 빌드하는데에 사용할수 있습니다. 아틀라스 사용자는 클러스터를 배포 할 수 있으며, 클러스터는 그룹화된 서버에서 데이터를 저장합니다.

<br />

## Cluster Deployment

인스턴스들의 모임을 클러스터라고 하며 하나의 시스템처럼 작동합니다. 단일 클러스터에서 각각의 인스턴스는 동일한 복제본을 가지고 있으며 이 모음을 레플리카 세트라고 합니다. 클러스터를 이용하여 배포할 경우, 이는 자동으로 레플리카 세트를 생성합니다.

## 용어 정리

1. 레플리카 세트
- 동일한 데이터를 저장하는 소수의 연결된 머신을 뜻하며 레플리카 세트 중 하나에 문제가 발생하더라도, 데이터를 그대로 유지할 수 있습니다.  

2. 인스턴스
- 로컨 또는 클라우드에서 특정 소프트웨어를 실행하는 단일 머신, MongoDB에서는 데이터베이스입니다.  

3. 클러스터
- 데이터를 저장하는 서버 그룹으로 여러 대의 컴퓨터를 네트워크를 통해 연결하여 하나의 단일 컴퓨터처럼 동장하도록 제작한 컴퓨터를 뜻합니다.

---

# MongoDB_basic

---

## MongoDB Document

몽고db에서 도큐먼트는 객체와 같이 데이터를 `필드-값` 쌍으로 저장하고 구성합니다. 도큐먼트에서 필드는 데이터의 고유한 식별자이고, 값은 주어진 식별자와 관련된 데이터를 뜻합니다.

```js
// 몽고db 도큐먼트 구성
{
<field>:<value>,
<field>:<value>
"name":"joycoding",
"title":"MongoDB",
"age":30
}
```

여기서 name이란 필드값은 `joycoding`입니다. 이러한 도큐먼트의 모음을 컬렉션이라 합니다. 그리고 데이터베이스는 여러개의 컬렌션으로 구성됩니다.

<br />

## 용어정리

1. 도큐먼트(Document)
- 필드-값 쌍으로 저장된 데이터  

2. 필드(Field)
- 데이터 포인트를 위한 고유한 식별자  

3. 값(value)
- 주어진 식별자와 연결된 데이터  

4. 컬랙션(Collection)
- MongoDB의 도큐먼트로 구성된 저장소 입니다. 일반적으로 도큐먼트 간의 공통 필드가 있습니다. 데이터베이스 당 많은 컬렉션이 있고, 컬렉션당 많은 도큐먼트가 있을수 있습니다.  

<br />

---

## JSON

shell을 이용하여 도큐먼트를 조회하거나 업데이트 할때 JSON형식으로 출력됩니다. 도큐먼트를 표현하는 방법중 하나이며 아래와 같은 조건을 만족해야 합니다.  

1. `{}` 중괄호로 도큐먼트가 시작하고, 끝나야합니다.
2. 필드와 값이 클론 `:` 으로 분리되어야 하며, 필드와 값을 포함하는 쌍은 쉼표로 구분됩니다.
3. 문자열인 필드도 쌍따옴표로 감싸야 합니다.

<br />

## JSON vs BSON

JSON 형식은 읽기 쉽고, 사용하기 편리한 형태를 가집니다. 하지만 JSON은 텍스트 형식이기 때문에 읽기 쉽지만, 파싱이 느리고 메모리 사용이 비효율적입니다. 그리고 JSON은 기본 데이터 타입만을 지원하기 때문에, 사용 할 수 있는 데이터 타입에 제약이 있습니다. 이러한 문제점을 해결 하기 위해 BSON형식이 도입 됩니다. BSON은 컴퓨터의 언어에 가까운 이진법에 기반을 둔 표현법입니다. 따라서 JSON보다 메모리 사용이 효율적이며 빠르고, 가볍고, 유연합니다. 뿐만 아니라, BSON의 사용으로 더 많은 데이터 타입을 사용할 수 있습니다.  

**몽고DB는 JSON형식으로 작성된 것은 무엇이든 데이터베이스에 추가,조회를 쉽게 할수 있으나 내부에서는 속도, 효율성, 유연성의 장점이 있는 BSON으로 데이터를 저장 및 사용하고 있습니다.**

<br />

몽고DB에서 JSON은 텍스트 형식이여서 읽기가 쉽고 편리해서 조회할때 많이 사용 BSON은 속도,효율성, 유연성 등 데이터를 저장하는데 많이 사용합니다.

---

## importing & exporting 

몽고디비에서 데이터를 가져오거나 내보내는 경우에 따라 효율적인 데이터 형식이 존재합니다. 보편적으로 몽고DB의 데이터는 BSON의 형태로 저장되고 읽기 쉬운 JSON의 형태로 출력됩니다. 이유는 두형식의 특징이 다르기 때문입니다.  

JSON형식으로 가져오고 내보내기 위한 명령어 `mongoimport`, `mongoexport`가 있습니다. (읽기 쉬움 조회 용의)
BSON형식으로 가져오고 내보내기 위한 명령어 `mongorestore`, `mongodump`가 있습니다. (백업 저장 용의)