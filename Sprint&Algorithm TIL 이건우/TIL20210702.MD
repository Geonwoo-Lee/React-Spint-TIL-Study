 <img src="TILimage.png" align="center" />

# TIL 2021 - 07 - 02 ğŸ“–!
 * ìŠ¤í”„ë¦°íŠ¸ 

* ì„œë²„ ìƒì„±í•˜ê¸°
- node.jsì—ì„œ ì„œë²„ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ ë…¸ë“œì˜ ë‚´ì¥ ëª¨ë“ˆì¸ http ëª¨ë“ˆì„ ì‚¬ìš©í•œë‹¤.
- createServerë¼ëŠ” ë©”ì†Œë“œë¡œ ì„œë²„ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- createServer í•¨ìˆ˜ ì•ˆì— response.writHead ë©”ì†Œë“œì™€ response.end ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
- listen ë©”ì†Œë“œë¡œ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.
```js
//1. ì„œë²„ ì‚¬ìš©ì„ ìœ„í•´ì„œ http ëª¨ë“ˆì„ http ë³€ìˆ˜ì— ë‹´ëŠ”ë‹¤.
const http = require('http');
const PORT = 5000;
const ip = "localhost";
//2. http ëª¨ë“ˆë¡œ ì„œë²„ë¥¼ ìƒì„±í•œë‹¤.
const server = http.createServer((request, response) => {
  response.writeHead(200,{'Content-Type':'text/html'});
  response.end('Hello world');
});
// 3. listen ë©”ì†Œë“œë¡œ í¬íŠ¸ê°€ 5000ì¸ ì„œë²„ë¥¼ ì‹¤í–‰í•œë‹¤. 
//ì„œë²„ê°€ ì‹¤í–‰ëœ ê²ƒì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ì½˜ì†”ì— 
//'http server listen on localhost:5000'ì„ ì¶œë ¥í•œë‹¤
server.listen(PORT, ip, () => {
  console.log(`http server listen on ${ip}:${PORT}`);
});
```
* ì„œë²„ ì ‘ì†í•˜ê¸°
ìœ„ì—ì„œ ë§Œë“  ì„œë²„ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œ í„°ë¯¸ë„ì„ ì¼œê³ , í•´ë‹¹ íŒŒì¼ ì €ì¥ëœ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œë‹¤.

ìœ„ì¹˜í•œ ê³³ì—ì„œ $ node íŒŒì¼ì´ë¦„.jsì„ í„°ë¯¸ë„ì— ì ìœ¼ë©´ ì„œë²„ëŠ” ì‹¤í–‰ëœë‹¤.

ê·¸ë¦¬ê³  ë‚˜ì„œ ë¸Œë¼ìš°ì €ë¥¼ ì¼œê³ , http://localhost:5000 ì— ì ‘ì†í•˜ë©´ ëœë‹¤.

* ì„œë²„ ë§Œë“¤ê¸°

```js
// ë¨¼ì € ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ê³ , ì•„ì´í”¼ì™€ í¬íŠ¸ë¥¼ ì •í•œë‹¤.
const http = require("http");
const PORT = 5000;
const ip = "localhost";
// createSever ë©”ì†Œë“œë¡œ ì„œë²„ë¥¼ ë§Œë“ ë‹¤.
const server = http.createServer((request, response) => {
  // ë©”ì†Œë“œê°€ 'OPTION' ì´ë¼ë©´ CORSì„¤ì •ì„ ëŒë ¤ì¤€ë‹¤.
  // (preflightìƒí™©)
  if(request.method === 'OPTION'){
    response.writeHead(200, defaultCorsHeader);
    response.end();
  }
  // ìš”ì²­ ë©”ì†Œë“œê°€ POSTì´ê³ , 
  // urlì˜ 3ë²ˆì§¸ ìŠ¬ë˜ì‰¬ë¶€ë¶„ì´ upperë¼ë©´
  if(request.method === 'POST' && request.url === '/upper'){
  let body = [];
  request
    .on('data', chunk =>{
      body.push(chunk);
    })
    .on('end', () =>{
      body = Buffer.concat(body).toString();
      response.writeHead(200, defaultCorsHeader);
      response.end(body.toUpperCase());
  // ìš”ì²­ ë©”ì†Œë“œê°€ POSTì´ê³ , 
  // urlì˜ 3ë²ˆì§¸ ìŠ¬ë˜ì‰¬ë¶€ë¶„ì´ lowerë¼ë©´
  })else if (request.method === "POST" && request.url === "/lower") {
    let body = [];
    request
      .on("data", chunk => {
        body.push(chunk);
      })
      .on("end", () => {
        body = Buffer.concat(body).toString();
        response.writeHead(200, defaultCorsHeader);
        response.end(body.toLowerCase());
      });
  // ìœ„ì˜ ë‘ ì¡°ê±´ì´ ì•„ë‹ˆë¼ë©´ ì—ëŸ¬ë¥¼ ì „ì†¡
  } else {
    response.statusCode = 404;
    response.end();
  }
  //
  console.log(
    `http request method is ${request.method}, url is ${request.url}`
  );
});
server.listen(PORT, ip, () => {
  console.log(`http server listen on ${ip}:${PORT}`);
});
const defaultCorsHeader = {
  "Access-Control-Allow-Origin": "*",
  "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
  "Access-Control-Allow-Headers": "Content-Type, Accept",
  "Access-Control-Max-Age": 10
};
``` 

* Bufferì™€ Stream
data.toString()ì„ ê±°ì¹˜ì§€ ì•Šê³  dataë§Œ ì¶œë ¥í•˜ë©´ <Buffer 72 65 61 64 20 6d 65 20 62 72 6f 21>ì™€ ê°™ì´ Bufferê°€ ì¶œë ¥ëœë‹¤.
!
ë°ì´í„°ë¥¼ ì¡°ê°(ì²­í¬, chunk)ë‚´ì–´ bufferì— ì±„ìš´ í›„ ë‹¤ ì°¨ë©´ bufferë¥¼ í†µì§¸ë¡œ ì˜®ê¸°ê³  ìƒˆ bufferì— ì•„ì§ ì˜®ê¸°ì§€ ëª»í•œ ë°ì´í„° ì¡°ê°ì„ ë‹¤ì‹œ ì±„ìš´ë‹¤. ë°ì´í„° ì¡°ê°ì„ bufferì— ì±„ìš°ëŠ” ì¼ì„ ë²„í¼ë§(buffering)ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ì˜ìƒì´ ë²„í¼ë§ ì¤‘ì´ë¼ë©° ì¬ìƒë˜ì§€ ì•ŠëŠ” ê²½ìš°ë¥¼ ì¢…ì¢… ê²½í—˜í–ˆì„í…ë° bufferì— ë°ì´í„°ë¥¼ ì±„ìš¸ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ë²„í¼ë§ ì‘ì—…ì„ ë§í•˜ëŠ” ê²ƒì´ë‹¤.
!
í•œí¸ bufferê°€ ë‹¤ ì°¨ë©´ ì´ë¥¼ ì „ì†¡í•˜ê³  ë‹¤ì‹œ bufferë¥¼ ì±„ìš°ëŠ” ë²„í¼ë§ ì‘ì—…ì„ ì—°ì†í•˜ëŠ” ê²ƒì´ ìŠ¤íŠ¸ë¦¼(stream)ì´ë‹¤. ë‹¨ë°œì„± single bufferë„ ì¡´ì¬í•˜ì§€ë§Œ ì§€ì†ì ìœ¼ë¡œ bufferê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ stream bufferë¼ê³  í•œë‹¤. ë²„í¼ë¥¼ ì´ìš©í•´ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” 'íë¦„'ì´ ìŠ¤íŠ¸ë¦¼ì´ë¼ê³  ì´í•´í•˜ì.

response.on(event, listener)
: ì§€ì •í•œ eventì— ëŒ€í•œ listenerë¥¼ ì¶”ê°€í•œë‹¤.

response.writeHead(statusCode[, statusMessage][, headers])
: ì´ ë©”ì†Œë“œëŠ” httpì˜ headerë¥¼ ì„¤ì •í•˜ëŠ” ë©”ì†Œë“œì´ë‹¤. ì²«ë²ˆì§¸ì¸ìëŠ” ì½”ë“œ ìŠ¤í…Œì´í„°ìŠ¤ ì½”ë“œë‹¤. 200ì´ë‚˜ 404 ì™€ ê°™ì´ ìƒíƒœë¥¼ ë³´ì—¬ì£¼ëŠ” ì½”ë“œë‹¤. ë‘ë²ˆì§¸ëŠ” ì‚¬ëŒë“¤ì´ readableí•œ statusMessageì´ê³ , ë§ˆì§€ë§‰ì€ the response headersì´ë‹¤.

readableì´ë€
end(data,[,encoding])
: ì—”ë“œ ë©”ì†Œë“œëŠ” ë³¸ë¬¸ì„ ì‘ì„±í•˜ëŠ” ë©”ì†Œë“œì´ë‹¤.

server.listen()
: (Starts the HTTP server listening for connections. This method is identical to server.listen() from net.Server.)

'end'
: endëŠ” ë”ì´ìƒ dataê°€ ì—†ì„ë•Œ ë°œë™ëœë‹¤.

'data'
: chunkë€, dataì˜ chunk(ë©ì–´ë¦¬ ë˜ëŠ” ì¡°ê°)ì´ë‹¤. ì´ ì²­í¬ëŠ” Bufferê°€ ë  ìˆ˜ ìˆê³  Stringì´ ë  ìˆ˜ë„ ìˆë‹¤.
ì—¬ê¸°ì— toString() ì„ ì‚¬ìš©í•´ì•¼ ìš°ë¦¬ê°€ ì•Œ ìˆ˜ ìˆëŠ” ë°ì´í„°ë¡œ ë³€í™˜ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
```js
const readable = getReadableStreamSomehow();
readable.on('data', (chunk) => {
  console.log(`Received ${chunk.length} bytes of data.`);
});
readable.on('end', () => {
  console.log('There will be no more data.');
});
```

SOP
í”„ë¡œí† ì½œ ë„ë©”ì¸ í¬íŠ¸ ì…‹ë‹¤ ê°™ìœ¼ë©´ ì„¸ì„ì˜¤ë¦¬ì§„
corsëŠ” ì € ì„¸ê°œê°€ ê°™ì§€ ì•Šì„ê²½ìš°ì—

corsë€? 
CORSë€ Cross Origin Resource Sharingì˜ ì•½ìë¡œ, ì„œë¡œ ë‹¤ë¥¸ origin ê°„ HTTP reqeustê°€ ê°€ëŠ¥í•˜ë„ë¡ í•´ì£¼ëŠ” í‘œì¤€ì´ë‹¤. HTTP requestëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Cross-Site HTTP Requestsê°€ ê°€ëŠ¥í•˜ë‹¤

* ì•Œê³ ë¦¬ì¦˜ 
ê°™ì€ ìˆ«ìëŠ” ì‹«ì–´
ë¬¸ì œ ì„¤ëª…
ë°°ì—´ arrê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤. ë°°ì—´ arrì˜ ê° ì›ì†ŒëŠ” ìˆ«ì 0ë¶€í„° 9ê¹Œì§€ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ, ë°°ì—´ arrì—ì„œ ì—°ì†ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ìˆ«ìëŠ” í•˜ë‚˜ë§Œ ë‚¨ê¸°ê³  ì „ë¶€ ì œê±°í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ë‹¨, ì œê±°ëœ í›„ ë‚¨ì€ ìˆ˜ë“¤ì„ ë°˜í™˜í•  ë•ŒëŠ” ë°°ì—´ arrì˜ ì›ì†Œë“¤ì˜ ìˆœì„œë¥¼ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´,

arr = [1, 1, 3, 3, 0, 1, 1] ì´ë©´ [1, 3, 0, 1] ì„ return í•©ë‹ˆë‹¤.
arr = [4, 4, 4, 3, 3] ì´ë©´ [4, 3] ì„ return í•©ë‹ˆë‹¤.
ë°°ì—´ arrì—ì„œ ì—°ì†ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ìˆ«ìëŠ” ì œê±°í•˜ê³  ë‚¨ì€ ìˆ˜ë“¤ì„ return í•˜ëŠ” solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•´ ì£¼ì„¸ìš”.

ì œí•œì‚¬í•­
ë°°ì—´ arrì˜ í¬ê¸° : 1,000,000 ì´í•˜ì˜ ìì—°ìˆ˜
ë°°ì—´ arrì˜ ì›ì†Œì˜ í¬ê¸° : 0ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ê³  9ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ì •ìˆ˜

```js 
function solution(arr) {
    return arr.filter((elm, idx) => elm !== arr[idx+1]); //filterë©”ì†Œë“œë¡œ elm ê°’ê³¼ idxê°’ì„ ë¹„êµí•´ë¦¬í„´í•´ì£¼ì—ˆìŠµë‹ˆë‹¤
}
```