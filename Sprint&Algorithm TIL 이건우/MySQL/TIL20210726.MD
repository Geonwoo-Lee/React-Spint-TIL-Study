# TIL 2021 - 07 - 23 ğŸ“– !

- ì˜¤ëŠ˜ì€ cmarket ë°ì´í„°ë² ì´ìŠ¤ì™€ sqlë°°ìš°ê¸°ë¥¼ í•´ë³´ì•˜ìŠµë‹ˆë‹¤ sqlë°°ìš°ê¸° part5ì—ì„œëŠ” joinì—ëŒ€í•´ ì§‘ì¤‘ì ìœ¼ë¡œ ë°°ì› ê³  cmarket ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í• ë•Œì—ëŠ” ì–´ë–»ê²Œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ”ì§€ë¥¼ í•´ë³´ì•˜ìŠµë‹ˆë‹¤

ì˜¤ëŠ˜ í‘¼ ë¬¸ì œë¥¼ ë³´ë©´ 

```
TODO: Q 5-2-8. categoryì˜ nameì´ soccerì¸ contentì˜ title, body, created_at, userì˜ nameì„ ì°¾ê¸°ìœ„í•œ SQLì„ ì‘ì„±í•´ì£¼ì„¸ìš”.
*/
const PART5_2_8 = `select content.title, content.body, content.created_at, user.name from category
left join content_category on content_category.categoryId = category.id
left join content on content.id = content_category.contentId
left join user on user.id = content.userId
where category.name = 'soccer'
`;

// ì¹´í…Œê³ ë¦¬ì˜ nameì´ soccerì¸ê²ƒì„ ê°€ì ¸ì˜¤ë‹ˆê¹Œ ì¼ë‹¨ category í…Œì´ë¸”ì„ ê°€ì ¸ì™€ ë³´ì•˜ê³  content ì˜ title, body, created_atê³¼ user name ì„ ì°¾ì•„ì˜¤ê¸° ìœ„í•´ joinì„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤ 
ê·¸ë¦¬ê³  whereë¬¸ì„ ì‚¬ìš©í•˜ì—¬ categoryì˜ nameì´ soccerì¸ê²ƒì„ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤ 
```

ê·¸ë¦¬ê³  cmarket ë°ì´í„°ë² ì´ìŠ¤ ì—ì„œëŠ” ìš°ì„  ì´í•´ë¥¼ í•˜ê¸° ìœ„í•´ ìŠ¤í‚¤ë§ˆë¥¼ ë””ìì¸ í•´ë³´ì•˜ìŠµë‹ˆë‹¤ .
<ing src = 'cmarket.png'>

ê·¸ë¦¬ê³  queryë¬¸ì„ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ ëª…ë ¹ë¬¸ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ 
```
    get: (callback) => {
      db.query("SELECT * from items", (error, result) => {
        callback(error, result);
      });
    }
    ``` 
    ì´ë ‡ê²Œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤ ë¬¼ë¡  ì €ë ‡ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ 
    ```
    const db = require('../db');
    ```
    ì´ë ‡ê²Œ ì„ ì–¸ì„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤ ê·¸ë¦¬ê³  ìš”ì²­ìœ¼ë¡œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë°›ì•„ ì™”ì„ ë•Œ idê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” 
    ```
    // result.inserId ëŠ” INSERT ë¬¸ì´ ì‹¤í–‰ëì„ ë•Œ, ì‚½ì…ëœ ë°ì´í„°ì˜ idë¥¼ ì–»ëŠ” ë°©ë²•ì´ë‹¤.
          [result.insertId, order.itemId, order.quantity]
    ```
    ì´ë ‡ê²Œ ë‚˜íƒ€ ë‚¼ ìˆ˜ ìˆì”ë‹ˆë‹¤ .